<!doctype html>
<html lang="zh-Hant">
  <head>
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" href="icons/icon-32.png">
    <link rel="apple-touch-icon" href="icons/icon.png">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Read</title>
    <!-- Bootstrap 5 (最新版) -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
      @font-face{font-family:"Microsoft JhengHei" !important;src:local("Microsoft JhengHei") !important;unicode-range:U+4E00-9FFF !important}
      body {overflow-y: auto;margin:0;color:#3B3B3B;font-size:1rem;font-family:arial,'Microsoft JhengHei', sans-serif !important}
      .sepia{background-color:#F8F8F8;color:#3B3B3B}
      .sepia-contrast{background-color:#3B3B3B;color:#F8F8F8}
      .toolbar { position: sticky; top: 0; z-index: 1020; }
      .table-responsive { height: calc(100vh - 64px); overflow: auto; }
      .card-container { height: calc(100vh - 64px); overflow: auto; }
      .segment-cell[contenteditable="true"]:focus { outline: 2px solid rgba(13,110,253,.25); }
      .segment-cell { white-space: pre-wrap; }
      .row-hover:hover { background: rgba(0,0,0,.02); }
      .note-cell { min-width: 220px; }
      /* 手機卡片外觀 */
      .seg-card { margin-bottom: 1rem; }
      .seg-card .card-body > .label { font-size: .8rem; opacity: .7; margin-bottom: .25rem; }
      /* 讓未聚焦時顯示純文字（由 JS 切換） */
      .display-text { white-space: pre-wrap; }

      @media screen and (-webkit-min-device-pixel-ratio: 2) {
        body{margin:0;background-color:#FFF1E5;color:#33302E;font-size:1.3rem;font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji" !important;}
        #container{min-height:100vh;max-width:100%;margin:auto;background-color:#FFF1E5}
        .sepia{background-color:#FFF1E5;color:#33302E}
        .sepia-contrast{background-color:#33302E;color:#FFF1E5}
        h1,h2,h3,h4,h5,h6,.title{font-size:1.5rem;color:#33302E !important;font-weight:bold}
        #list, .btn {font-weight:normal}
        #loading{width:3rem;height:3rem}
        .en-us,.fs12{font-size:1.3rem}
      }

      /* ✅ iPhone 11、XR、12、13、14 以上機種 */
      @media screen and (max-width: 430px) and (-webkit-min-device-pixel-ratio: 2) {

      }

      /* ✅ 一般 iPad (如 9.7", 10.2", iPad Air) */
      @media screen and (min-width: 768px) and (max-width: 1023px) and (-webkit-min-device-pixel-ratio: 2) {
        body{font-size:2rem} h1,h2,h3,h4,h5,h6,.title{font-size:2rem} .en-us,.fs12{font-size:1.6rem} .fs10, .time, figcaption, .btn{font-size:1.3rem} #list{padding:2rem} svg.bi{height:2.8rem !important;width:2.8rem !important}
      }

      /* ✅ iPad Pro 12.9 吋 */
      @media screen and (min-width: 1024px) and (max-width: 1366px) and (-webkit-min-device-pixel-ratio: 2) {
        body{font-size:2rem} h1,h2,h3,h4,h5,h6,.title{font-size:2rem} .en-us,.fs12{font-size:1.6rem} .fs10, .time, figcaption, .btn{font-size:1.3rem} #list{padding:2rem} svg.bi{height:2.8rem !important;width:2.8rem !important}
      }
    </style>
  </head>
  <body>
    <!-- 工具列 -->
    <nav class="navbar navbar-light bg-light border-bottom toolbar">
      <div class="container-fluid gap-2">
        <div class="d-flex align-items-center gap-2 flex-wrap">
          <div class="input-group">
            <label class="input-group-text" for="bookSelect">選書</label>
            <select id="bookSelect" class="form-select"></select>
          </div>

          <button id="btnMerge" class="btn btn-outline-secondary" title="把目前列與上一列合併">合併</button>
          <button id="btnDelete" class="btn btn-outline-danger" title="刪除目前列">刪除</button>
          <button id="btnSave" class="btn btn-primary" title="儲存進度與中文檔">儲存</button>
        </div>

        <div class="d-flex align-items-center gap-2">
          <small class="text-muted">視窗：<span id="rangeInfo">-</span></small>
          <small class="text-muted">游標：<span id="focusInfo">-</span></small>
        </div>
      </div>
    </nav>

    <!-- 桌機表格 -->
    <div id="tableView" class="container-fluid d-none d-md-block">
      <div class="table-responsive" id="scrollHostTable">
        <table class="table table-sm align-middle">
          <thead class="table-light position-sticky top-0">
            <tr>
              <th style="width: 40%">English</th>
              <th style="width: 40%">中文</th>
              <th class="note-cell">筆記</th>
            </tr>
          </thead>
          <tbody id="tbody"></tbody>
        </table>
      </div>
    </div>

    <!-- 手機卡片 -->
    <div id="cardView" class="container d-block d-md-none">
      <div id="scrollHostCard" class="card-container py-2"></div>
    </div>

    <!-- Bootstrap JS (for dropdown sizing only; app 本身純 JS) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="read.js"></script>
  </body>
</html>
