<!doctype html>
<html lang="zh-Hant">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>中英對照閱讀</title>
    <!-- Bootstrap 5 (最新版) -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
      body { overflow-y: auto; }
      .toolbar { position: sticky; top: 0; z-index: 1020; }
      .table-responsive { height: calc(100vh - 64px); overflow: auto; }
      .card-container { height: calc(100vh - 64px); overflow: auto; }
      .segment-cell[contenteditable="true"]:focus { outline: 2px solid rgba(13,110,253,.25); }
      .segment-cell { white-space: pre-wrap; }
      .row-hover:hover { background: rgba(0,0,0,.02); }
      .note-cell { min-width: 220px; }
      /* 手機卡片外觀 */
      .seg-card { margin-bottom: 1rem; }
      .seg-card .card-body > .label { font-size: .8rem; opacity: .7; margin-bottom: .25rem; }
      /* 讓未聚焦時顯示純文字（由 JS 切換） */
      .display-text { white-space: pre-wrap; }
    </style>
  </head>
  <body>
    <!-- 工具列 -->
    <nav class="navbar navbar-light bg-light border-bottom toolbar">
      <div class="container-fluid gap-2">
        <div class="d-flex align-items-center gap-2 flex-wrap">
          <span class="navbar-brand mb-0 h6">中英對照閱讀</span>

          <div class="input-group">
            <label class="input-group-text" for="bookSelect">選擇書籍</label>
            <select id="bookSelect" class="form-select"></select>
          </div>

          <button id="btnMerge" class="btn btn-outline-secondary" title="把目前列與上一列合併">
            合併
          </button>
          <button id="btnDelete" class="btn btn-outline-danger" title="刪除目前列">
            刪除
          </button>
          <button id="btnSave" class="btn btn-primary" title="儲存進度與中文檔">
            儲存
          </button>
        </div>

        <div class="d-flex align-items-center gap-2">
          <small class="text-muted">視窗：<span id="rangeInfo">-</span></small>
          <small class="text-muted">游標：<span id="focusInfo">-</span></small>
        </div>
      </div>
    </nav>

    <!-- 桌機表格 -->
    <div id="tableView" class="container-fluid d-none d-md-block">
      <div class="table-responsive" id="scrollHostTable">
        <table class="table table-sm align-middle">
          <thead class="table-light position-sticky top-0">
            <tr>
              <th style="width: 40%">English</th>
              <th style="width: 40%">中文</th>
              <th class="note-cell">筆記</th>
            </tr>
          </thead>
          <tbody id="tbody"></tbody>
        </table>
      </div>
    </div>

    <!-- 手機卡片 -->
    <div id="cardView" class="container d-block d-md-none">
      <div id="scrollHostCard" class="card-container py-2"></div>
    </div>

    <!-- Bootstrap JS (for dropdown sizing only; app 本身純 JS) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="read.js"></script>
  </body>
</html>